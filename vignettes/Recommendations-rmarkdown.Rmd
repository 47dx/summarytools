---
title: "Recommendations for Using summarytools With Rmarkdown"
author: "Dominic Comtois"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette: 
    css: 
    - !expr system.file("rmarkdown/templates/html_vignette/resources/vignette.css", package = "rmarkdown")
vignette: >
  %\VignetteIndexEntry{Recommendations for Rmarkdown}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include=FALSE}
library(knitr)
opts_chunk$set(comment=NA, prompt=FALSE, cache=FALSE, echo=TRUE, results='asis')
```
```{r, echo=FALSE}
library(summarytools)
st_css(bootstrap = FALSE)
```

This document uses theme `rmarkdown::html_vignette`.

## Preliminary Note

The information in this document is not 100% up-to-date, but the recommendations
still hold. The information is accurate, but at times incomplete. An update will
follow shortly.

## Configuration

The **yaml** section of this document is as follows:

```
---
title: "Recommendations for Using summarytools With Rmarkdown"
author: "Dominic Comtois"
date: "'r Sys.Date()'"     <--- using backticks, not single quotes
output: 
  rmarkdown::html_vignette: 
    css: 
    - !expr system.file("rmarkdown/templates/html_vignette/resources/vignette.css", package = "rmarkdown")
vignette: >
  %\VignetteIndexEntry{Recommendations for Rmarkdown}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
```

The following **summarytools global options** have been set:
```{r}
st_options(bootstrap.css = FALSE,     # Already part of the theme
           footnote = NA,                 
           subtitle.emphasis = FALSE) # For the vignette theme, this gives
                                      # much better results. YMMV
``` 

Also, the following **knitr chunk options** were set as following:
```{r, eval=FALSE}
library(knitr)
opts_chunk$set(comment=NA, prompt=FALSE, cache=FALSE, echo=TRUE, results='asis')
```

Finally, **summarytools' CSS** has been included in the following manner, with
chunk option `echo = FALSE`:
```{r, eval=FALSE}
library(summarytools)
st_css(bootstrap = FALSE)
```

## Demo / Examples

Below are examples using recommended styles for *Rmarkdown* rendering. Available
styles in summarytools are the same as `pander`'s: 

- _simple_ (default)  
- _rmarkdown_  
- _grid_  
- _multiline_  
 
For `freq()`, `descr()` (and `ctable()`, although with caveats), _rmarkdown_ 
style is recommended. For`dfSummary()`, _grid_ is recommended.
 
Starting with `freq()`, we'll review the recommended methods and styles to 
quickly get satisfying results in your _Rmarkdown_ documents.

Jump to...

- [ctable()](#ctable)  
- [descr()](#descr)  
- [dfSummary()](#dfsummary)  


--------------------------------------------------------------------------------

# freq()

`freq()` is best used with `style = 'rmarkdown'; html rendering is also 
possible.

## Rmarkdown Style
```{r}
freq(tobacco$gender, style = 'rmarkdown')
```


## HTML Rendering
```{r}
print(freq(tobacco$gender), method = 'render')
```

If you find the table too large, you can use `table.classes = 'st-small'` - an 
example is provided further below.

--------------------------------------------------------------------------------

<a href="#top">Back to top</a>

# ctable() {#ctable}

## Rmarkdown Style

Tables with heading spanning over 2 rows are not fully supported in markdown 
(yet), but the result is getting close to acceptable. This, however, is not
true for all themes. That's why the rendering method is preferred.

```{r}
ctable(tobacco$gender, tobacco$smoker, style = 'rmarkdown')
```

## HTML Rendering

For best results, use this method.

```{r ctable_html}
print(ctable(tobacco$gender, tobacco$smoker), method = 'render')
```

--------------------------------------------------------------------------------
 
<a href="#top">Back to top</a>
 
# descr() {#descr}
`descr()` is also best used with `style = 'rmarkdown'`, and HTML rendering is 
also supported.

## Rmarkdown Style
```{r}
descr(tobacco, style = 'rmarkdown')
```


## HTML Rendering

We'll use table.classes = 'st-small' to show how it affects the table's size
(compare to the `freq()` table rendered earlier).

```{r}
print(descr(tobacco), method = 'render', table.classes = 'st-small')
```
 
--------------------------------------------------------------------------------

<a href="#top">Back to top</a>

# dfSummary() {#dfsummary}

## Grid Style

This style gives good results, and since v0.9, the graphs are shown as true 
images. Don't forget to specify `plain.ascii = FALSE` (or set it as a global
option with `st_options(plain.ascii = FALSE)`), or you won't get good results.

```{r dfs_grid, results='asis'}
dfSummary(tobacco, style = 'grid', plain.ascii = FALSE, graph.magnif = 0.72)
```

## HTML Rendering

This method has also been much improved in v0.9:

```{r}
print(dfSummary(tobacco, graph.magnif = 0.72), method = 'render')
```

<a href="#top">Back to top</a>
