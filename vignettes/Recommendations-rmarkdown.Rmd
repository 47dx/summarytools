---
title: "Recommendations for Using summarytools With Rmarkdown"
author: "Dominic Comtois"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette: 
    css: 
    - !expr system.file("rmarkdown/templates/html_vignette/resources/vignette.css", package = "rmarkdown")
    - !expr system.file("includes/stylesheets/summarytools.css", package = "summarytools")
vignette: >
  %\VignetteIndexEntry{Recommendations for Rmarkdown}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}

---

<!-- (output: html_document or html_vignette) -->

```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(comment=NA, prompt=FALSE, cache=FALSE, echo=TRUE, results='asis')
library(summarytools)
```

This document uses theme `rmarkdown::html_vignette`.

Below are examples using recommended styles for `rmarkdown` rendering. Available styles are:  

- _simple_ (default)  
- _rmarkdown_  
- _grid_  
- _multiline_  
 
## Important!

`knitr` option `results = 'asis'` must be specified to get good results. This can be done globally via `opts_chunk$set(results='asis')`, on in the individual chunks.

The following summarytools global options have been set:
```{r setup_st}
st_options('omit.headings', TRUE)
st_options('bootstrap.css', FALSE)
st_options('footnote', NA)
``` 

## Using method = 'render'

To generate tables using summarytool's own html rendering, the .Rmd document's configuration part (yaml) must point to the package's `summarytools.css` file. This can be achieved in several ways. The current vignette uses this configuration:

````
output: 
  rmarkdown::html_vignette: 
    css: 
    - !expr system.file("rmarkdown/templates/html_vignette/resources/vignette.css", package = "rmarkdown")
    - !expr system.file("includes/stylesheets/summarytools.css", package = "summarytools")
````

Another option would be something like this, pointing to the appropriate directory on your system.


````
---
title: "RMarkdown using summarytools"
output: 
  html_document: 
    css: C:/R/win-library/3.4/summarytools/includes/stylesheets/summarytools.css
---
````

And now the examples, starting with `freq()`.

Jump to...

- [descr()](#descr)  
- [ctable()](#ctable)  
- [dfSummary()](#dfsummary)  


--------------------------------------------------------------------------------

# freq()

`freq()` is best used with `style = 'rmarkdown'; html rendering is also possible.

## Rmarkdown Style
```{r freq_rm}
freq(tobacco$gender, style = 'rmarkdown')
```


## HTML Rendering
```{r freq_html}
print(freq(tobacco$gender), method = 'render')
```


If you find the table too large, you can use `table.classes = 'st-small'` - see next examples.

--------------------------------------------------------------------------------------------------
 
<a href="#top">Back to top</a>
 
# descr() {#descr}
`descr()` is also best used with `style = 'rmarkdown'`, and HTML rendering is also supported.

## Rmarkdown Style
```{r descr_rm}
descr(tobacco, style = 'rmarkdown')
```


## HTML Render

This time, we'll use table.classes = 'st-small' to show the difference in size, compared to the `freq()` table rendered above.

```{r descr_html}
print(descr(tobacco), method = 'render', table.classes = 'st-small')
```

 
--------------------------------------------------------------------------------

<a href="#top">Back to top</a>

# ctable() {#ctable}

For best results, use *HTML rendering*.

## Rmarkdown Style
```{r ctable_rm, results='asis'}
ctable(tobacco$gender, tobacco$smoker, style = 'rmarkdown')
```

Tables with headings spanning over 2 rows are not fully supported in markdown (yet), although the result is not too bad.

## HTML Render
```{r ctable_html}
print(ctable(tobacco$gender, tobacco$smoker), method = 'render')
```

--------------------------------------------------------------------------------

<a href="#top">Back to top</a>

# dfSummary() {#dfsummary}

For best results, use _grid_ style or HTML rendering 

## Grid Style
```{r dfs_grid, results='asis'}
dfSummary(tobacco, style = 'grid', plain.ascii = FALSE)
```

The histograms don't show up using this method. Only the bar plots are shown.


## HTML Render
```{r dfs_html, results='asis'}
print(dfSummary(tobacco, graph.magnif = 0.75), method = 'render')
```

<a href="#top">Back to top</a>

<!-- ```{css} -->
<!-- p { -->
<!-- color: gray; -->
<!-- } -->
<!-- ``` -->
