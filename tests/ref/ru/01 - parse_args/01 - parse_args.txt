
# ------------------------------ parse_args.R ----------------------------------  

> library(dplyr) 
> data(tobacco) 
> label(tobacco) <- "Tobacco Study" 
> label(tobacco$smoker) <- "Smoking Status" 
> label(tobacco$age) <- "Age of the Subject" 

# Basic cases ------------------------------------------------------------------ 

> freq(tobacco$smoker) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> freq(tobacco["smoker"]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> freq(tobacco[["smoker"]]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> freq(tobacco[,5]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> freq(tobacco[[5]]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00


# With row subsets ------------------------------------------------------------- 

> freq(tobacco$smoker[1:100]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes      27     27.00           27.00     27.00                27.00
         No      73     73.00          100.00     73.00               100.00
       <NA>       0                                0.00               100.00
      сумма     100    100.00          100.00    100.00               100.00

> freq(tobacco[1:100, "smoker"]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes      27     27.00           27.00     27.00                27.00
         No      73     73.00          100.00     73.00               100.00
       <NA>       0                                0.00               100.00
      сумма     100    100.00          100.00    100.00               100.00

> freq(tobacco[1:100, 5]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes      27     27.00           27.00     27.00                27.00
         No      73     73.00          100.00     73.00               100.00
       <NA>       0                                0.00               100.00
      сумма     100    100.00          100.00    100.00               100.00

> freq(tobacco[[5]][1:100]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes      27     27.00           27.00     27.00                27.00
         No      73     73.00          100.00     73.00               100.00
       <NA>       0                                0.00               100.00
      сумма     100    100.00          100.00    100.00               100.00

> freq(tobacco$smoker[tobacco$smoker=="Yes"]) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298    100.00          100.00    100.00               100.00
         No       0      0.00          100.00      0.00               100.00
       <NA>       0                                0.00               100.00
      сумма     298    100.00          100.00    100.00               100.00


# Standalone variable ---------------------------------------------------------- 

> smoker <- tobacco$smoker 
> freq(smoker) 

частота  
smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00


# with ------------------------------------------------------------------------- 

> with(tobacco, freq(smoker))            

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> with(tobacco, descr(age))              

Кол-венный показатель распределения  
tobacco$age  
Ярлык: Age of the Subject  
Кол-во: 1000  

                            age
---------------------- --------
      среднее значение    49.60
             ст. откл.    18.29
                   Mин    18.00
                    Q1    34.00
               Mедиана    50.00
                    Q3    66.00
                  Mакс    80.00
                   MAD    23.72
                   IQR    32.00
                    CV     0.37
            асимметрия    -0.04
         SE.асимметрия     0.08
               эксцесс    -1.26
            Цифр. корр   975.00
            Проц. корр    97.50

> with(tobacco, ctable(smoker, diseased)) 

Кросс-табуляция, пропорции по рядам  
smoker * diseased  
Верт. таблица: tobacco  
Ярлык: Tobacco Study  

-------- ---------- ------------- ------------- ---------------
           diseased           Yes            No           сумма
  smoker                                                       
     Yes              125 (41.9%)   173 (58.1%)    298 (100.0%)
      No               99 (14.1%)   603 (85.9%)    702 (100.0%)
   сумма              224 (22.4%)   776 (77.6%)   1000 (100.0%)
-------- ---------- ------------- ------------- ---------------


# pipe ------------------------------------------------------------------------- 

> library(magrittr) 
> tobacco$smoker %>% freq()      

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> tobacco["smoker"] %>% freq()   

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> tobacco[["smoker"]] %>% freq() 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> tobacco[,5] %>% freq()         

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> tobacco[[5]] %>% freq() 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> if (lang != "ru") dfSummary(tobacco) %>% print(style = "grid", plain.ascii = FALSE) 
> tobacco %$% ctable(smoker, diseased) 

Кросс-табуляция, пропорции по рядам  
smoker * diseased  
Верт. таблица: tobacco  
Ярлык: Tobacco Study  

-------- ---------- ------------- ------------- ---------------
           diseased           Yes            No           сумма
  smoker                                                       
     Yes              125 (41.9%)   173 (58.1%)    298 (100.0%)
      No               99 (14.1%)   603 (85.9%)    702 (100.0%)
   сумма              224 (22.4%)   776 (77.6%)   1000 (100.0%)
-------- ---------- ------------- ------------- ---------------

> tobacco %>% select(age) %>% arrange() %>% descr(stats = "common") 

Кол-венный показатель распределения  
tobacco$age  
Ярлык: Age of the Subject  
Кол-во: 1000  

                            age
---------------------- --------
      среднее значение    49.60
             ст. откл.    18.29
                   Mин    18.00
               Mедиана    50.00
                  Mакс    80.00
            Цифр. корр   975.00
            Проц. корр    97.50


# by --------------------------------------------------------------------------- 

> stby(tobacco$smoker, tobacco$gender, freq)           

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  
Переменные: gender = F  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     147     30.06           30.06     30.06                30.06
         No     342     69.94          100.00     69.94               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

Переменные: gender = M  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     143     29.24           29.24     29.24                29.24
         No     346     70.76          100.00     70.76               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

> stby(tobacco["smoker"], tobacco["gender"], freq)     

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  
Переменные: gender = F  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     147     30.06           30.06     30.06                30.06
         No     342     69.94          100.00     69.94               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

Переменные: gender = M  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     143     29.24           29.24     29.24                29.24
         No     346     70.76          100.00     70.76               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

> stby(tobacco[,"smoker"], tobacco[,"gender"], freq)   

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  
Переменные: gender = F  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     147     30.06           30.06     30.06                30.06
         No     342     69.94          100.00     69.94               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

Переменные: gender = M  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     143     29.24           29.24     29.24                29.24
         No     346     70.76          100.00     70.76               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

> stby(tobacco[["smoker"]], tobacco[["gender"]], freq) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  
Переменные: gender = F  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     147     30.06           30.06     30.06                30.06
         No     342     69.94          100.00     69.94               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

Переменные: gender = M  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     143     29.24           29.24     29.24                29.24
         No     346     70.76          100.00     70.76               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00


# by, numeric column indexing -------------------------------------------------- 

> stby(tobacco[[5]], tobacco[[1]], freq) 

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  
Переменные: gender = F  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     147     30.06           30.06     30.06                30.06
         No     342     69.94          100.00     69.94               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

Переменные: gender = M  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     143     29.24           29.24     29.24                29.24
         No     346     70.76          100.00     70.76               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

> stby(tobacco[,5], tobacco[,1], freq)   

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  
Переменные: gender = F  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     147     30.06           30.06     30.06                30.06
         No     342     69.94          100.00     69.94               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

Переменные: gender = M  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     143     29.24           29.24     29.24                29.24
         No     346     70.76          100.00     70.76               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00


# by with ctable --------------------------------------------------------------- 

> stby(list(x = tobacco$smoker, y = tobacco$diseased), tobacco$gender, ctable) # ok 

Кросс-табуляция, пропорции по рядам  
smoker * diseased  
Верт. таблица: tobacco  
Ярлык: Tobacco Study  
Переменные: gender = F  

-------- ---------- ------------- ------------- --------------
           diseased           Yes            No          сумма
  smoker                                                      
     Yes               62 (42.2%)    85 (57.8%)   147 (100.0%)
      No               49 (14.3%)   293 (85.7%)   342 (100.0%)
   сумма              111 (22.7%)   378 (77.3%)   489 (100.0%)
-------- ---------- ------------- ------------- --------------

Переменные: gender = M  

-------- ---------- ------------- ------------- --------------
           diseased           Yes            No          сумма
  smoker                                                      
     Yes               63 (44.1%)    80 (55.9%)   143 (100.0%)
      No               47 (13.6%)   299 (86.4%)   346 (100.0%)
   сумма              110 (22.5%)   379 (77.5%)   489 (100.0%)
-------- ---------- ------------- ------------- --------------


# with + by -------------------------------------------------------------------- 

> with(tobacco, stby(smoker, gender, freq))                                

частота  
tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  
Переменные: gender = F  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     147     30.06           30.06     30.06                30.06
         No     342     69.94          100.00     69.94               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

Переменные: gender = M  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     143     29.24           29.24     29.24                29.24
         No     346     70.76          100.00     70.76               100.00
       <NA>       0                                0.00               100.00
      сумма     489    100.00          100.00    100.00               100.00

> with(tobacco, stby(list(x = smoker, y = diseased), gender, ctable))      

Кросс-табуляция, пропорции по рядам  
smoker * diseased  
Верт. таблица: tobacco  
Ярлык: Tobacco Study  
Переменные: gender = F  

-------- ---------- ------------- ------------- --------------
           diseased           Yes            No          сумма
  smoker                                                      
     Yes               62 (42.2%)    85 (57.8%)   147 (100.0%)
      No               49 (14.3%)   293 (85.7%)   342 (100.0%)
   сумма              111 (22.7%)   378 (77.3%)   489 (100.0%)
-------- ---------- ------------- ------------- --------------

Переменные: gender = M  

-------- ---------- ------------- ------------- --------------
           diseased           Yes            No          сумма
  smoker                                                      
     Yes               63 (44.1%)    80 (55.9%)   143 (100.0%)
      No               47 (13.6%)   299 (86.4%)   346 (100.0%)
   сумма              110 (22.5%)   379 (77.5%)   489 (100.0%)
-------- ---------- ------------- ------------- --------------

> with(tobacco[1:7], stby(list(x = smoker, y = diseased), gender, ctable)) 

Кросс-табуляция, пропорции по рядам  
smoker * diseased  
Верт. таблица: tobacco  
Переменные: gender = F  

-------- ---------- ------------- ------------- --------------
           diseased           Yes            No          сумма
  smoker                                                      
     Yes               62 (42.2%)    85 (57.8%)   147 (100.0%)
      No               49 (14.3%)   293 (85.7%)   342 (100.0%)
   сумма              111 (22.7%)   378 (77.3%)   489 (100.0%)
-------- ---------- ------------- ------------- --------------

Переменные: gender = M  

-------- ---------- ------------- ------------- --------------
           diseased           Yes            No          сумма
  smoker                                                      
     Yes               63 (44.1%)    80 (55.9%)   143 (100.0%)
      No               47 (13.6%)   299 (86.4%)   346 (100.0%)
   сумма              110 (22.5%)   379 (77.5%)   489 (100.0%)
-------- ---------- ------------- ------------- --------------


# lapply ----------------------------------------------------------------------- 

> print(lapply(tobacco[c(1,3,5)], freq)) 

частота  
tobacco$gender  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
          F     489     50.00           50.00     48.90                48.90
          M     489     50.00          100.00     48.90                97.80
       <NA>      22                                2.20               100.00
      сумма    1000    100.00          100.00    100.00               100.00

tobacco$age.gr  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
      18-34     258     26.46           26.46     25.80                25.80
      35-50     241     24.72           51.18     24.10                49.90
      51-70     317     32.51           83.69     31.70                81.60
       71 +     159     16.31          100.00     15.90                97.50
       <NA>      25                                2.50               100.00
      сумма    1000    100.00          100.00    100.00               100.00

tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

> lap <- lapply(tobacco[c(1,3,5)], freq) 
> print(lap) 

частота  
tobacco$gender  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
          F     489     50.00           50.00     48.90                48.90
          M     489     50.00          100.00     48.90                97.80
       <NA>      22                                2.20               100.00
      сумма    1000    100.00          100.00    100.00               100.00

tobacco$age.gr  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
      18-34     258     26.46           26.46     25.80                25.80
      35-50     241     24.72           51.18     24.10                49.90
      51-70     317     32.51           83.69     31.70                81.60
       71 +     159     16.31          100.00     15.90                97.50
       <NA>      25                                2.50               100.00
      сумма    1000    100.00          100.00    100.00               100.00

tobacco$smoker  
Ярлык: Smoking Status  
Тип: склейка  

              Част.   % корр.   % корр. сумм.   % сумма   % совокупной суммы
----------- ------- --------- --------------- --------- --------------------
        Yes     298     29.80           29.80     29.80                29.80
         No     702     70.20          100.00     70.20               100.00
       <NA>       0                                0.00               100.00
      сумма    1000    100.00          100.00    100.00               100.00

